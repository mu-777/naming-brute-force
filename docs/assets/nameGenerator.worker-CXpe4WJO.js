(function(){"use strict";var o=(n=>(n.START_WITH="START_WITH",n.END_WITH="END_WITH",n.CONTAIN="CONTAIN",n))(o||{}),y=(n=>(n[n.TWO=2]="TWO",n[n.THREE=3]="THREE",n))(y||{});self.onmessage=async n=>{const{kanjiInput:a,searchMode:l,charCount:k,strokeCounts:u}=n.data.searchParams,{kanjiDict:c,strokeGroupedKanji:p}=n.data.kanjiCache;console.log(a);const m=a.reduce((T,d)=>T+c[d].stroke,0),s=a.join("");function*j(){const T=k===y.TWO||a.length===2,d=new Set(n.data.excludedKanji.map(f=>f.character));if(T){const f=k-a.length===1&&u.length>0?u.reduce((e,t)=>{const i=t-m;return i in p&&e.push(...p[i]),e},[]).filter(e=>!d.has(e)):Object.keys(c).filter(e=>!d.has(e));for(const e of f){if(a.length===1&&e===a[0])continue;const t=m+c[e].stroke;l===o.START_WITH?yield{name:s+e,totalStrokes:t}:l===o.END_WITH?yield{name:e+s,totalStrokes:t}:l===o.CONTAIN&&(yield{name:s+e,totalStrokes:t},yield{name:e+s,totalStrokes:t})}}else{const f=Object.keys(c);for(const e of f)for(const t of f){const i=m+c[e].stroke+c[t].stroke;u.length>0&&!u.includes(i)||e===t||e===a[0]||t===a[0]||(l===o.START_WITH?(yield{name:s+e+t,totalStrokes:i},yield{name:s+t+e,totalStrokes:i}):l===o.END_WITH?(yield{name:e+t+s,totalStrokes:i},yield{name:t+e+s,totalStrokes:i}):l===o.CONTAIN&&(yield{name:s+e+t,totalStrokes:i},yield{name:s+t+e,totalStrokes:i},yield{name:e+t+s,totalStrokes:i},yield{name:t+e+s,totalStrokes:i},yield{name:e+s+t,totalStrokes:i},yield{name:t+s+e,totalStrokes:i}))}}}const g=j(),I=100,h=10;let r=[];for(const T of g)r.push(T),r.length>=I&&(self.postMessage({type:"partial",results:r}),r=[],await new Promise(d=>setTimeout(d,h)));r.length>0&&self.postMessage({type:"partial",results:r}),self.postMessage({type:"complete"})}})();
